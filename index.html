<html>
<head>
<title>NetPong</title>
</head>
<style type='text/css'>
</style>
<script src="http://phildogames.com:4000/socket.io/socket.io.js"></script><!-- fetches file via node js -->
<script type='text/javascript' src='canv.js'></script>
<script type='text/javascript' src='pongrenderer.js'></script>

<script type='text/javascript'>
var c;
var s;
var mouseY = 160;

var state = 
{
  p1y:160,
  p2y:160,
  bx:160,
  by:160
}

var init = function()
{
  s = io.connect('http://phildogames.com:4000');
  s.on('state', function(data) { state = data; });

  c = new Canv(640,320);
  c.canvas.style.border = '1px solid black';
  document.getElementById('render_area').insertBefore(c.canvas,document.getElementById('shadow'));
  tick();
}
  
var tick = function()
{
  renderPong(c,state.bx,state.by,state.p1y,state.p2y);
  setTimeout(tick, 10);
}

window.addEventListener('load', init, false);
window.addEventListener("mousemove", function(e) { mouseY = e.clientY-50; }, false);
</script>
<body style='background-color:#EEEEEE;'>
<div id='render_area' style='width:640px; margin:10px auto; position:relative; top:50px;'>
  <img id='shadow' src='shadow.png' style='display:block;'></img>
</div>
<div id="debug" style="color:white; position:absolute; top:0px;"></div>
</body>
</html>
